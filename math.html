<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ìˆ˜í•™ ë¬¸ì œ ì±„ì </title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    #result { margin-top: 20px; white-space: pre-line; background: #f8f8f8; padding: 10px; border: 1px solid #ccc; }
  </style>
</head>
<body>
  <h1>ğŸ“· ìˆ˜í•™ ì‹œí—˜ì§€ë¥¼ ì´¬ì˜í•˜ê±°ë‚˜ ì—…ë¡œë“œí•˜ì„¸ìš”</h1>

  <form>
    <input type="file" accept="image/*" capture="environment" required>
    <p>â€» ì‹œí—˜ì§€ë¥¼ ì •ë©´ì—ì„œ ì„ ëª…í•˜ê²Œ ì´¬ì˜í•´ ì£¼ì„¸ìš”.</p>
    <button type="submit">ì±„ì í•˜ê¸°</button>
  </form>

  <div id="result">ğŸ“Š ì±„ì  ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</div>
  <p><a href="index.html">â† ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a></p>

  <script>
    document.querySelector("form").addEventListener("submit", async (e) => {
      e.preventDefault();

      const file = document.querySelector("input[type=file]").files[0];
      if (!file) return alert("íŒŒì¼ì„ ì„ íƒí•´ ì£¼ì„¸ìš”.");

      const reader = new FileReader();
      reader.onloadend = async () => {
        const base64 = reader.result.split(',')[1];
        const resultDiv = document.getElementById("result");
        resultDiv.textContent = "ì±„ì  ì¤‘ì…ë‹ˆë‹¤...";

        try {
          const res = await fetch("https://68744ad1-8dba-41d6-9c56-4a5aa4062eb2-00-2w8umvmvho639.sisko.replit.dev/grade", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              image: base64,
              hint: `ë‹¤ìŒì€ 3í•™ë…„ ìˆ˜í•™ ë¬¸ì œì˜ ì •ë‹µì…ë‹ˆë‹¤. í•™ìƒì˜ ì‹œí—˜ì§€ë¥¼ ë³´ê³  ë¬¸ì œë¥¼ ì‹ë³„í•œ ë’¤, ì•„ë˜ ì •ë‹µê³¼ ë¹„êµí•´ ì˜¤ë‹µì„ í‘œ í˜•ì‹ìœ¼ë¡œ ì •ë¦¬í•´ ì£¼ì„¸ìš”.
ë¬¸ì œë¥¼ ê³„ì‚°í•˜ì§€ ë§ê³  ë¹„êµë§Œ í•˜ì„¸ìš”.

1: 243 + 326 = 569
2: 428 + 351 = 779
3: 273 + 314 = 587
4: 183 + 402 = 585
5: 527 - 314 = 213
6: 627 - 212 = 415
7: 942 - 457 = 485
8: 184 + 437 = 621`
            })
          });

          const data = await res.json();
          resultDiv.textContent = "ğŸ“Š ì±„ì  ê²°ê³¼:\n\n" + (data.result || "ê²°ê³¼ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.");
        } catch (err) {
          resultDiv.textContent = "âŒ ì˜¤ë¥˜ ë°œìƒ:\n" + err.message;
        }
      };

      reader.readAsDataURL(file);
    });
  </script>
</body>
</html>
