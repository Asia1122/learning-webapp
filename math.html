<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ìˆ˜í•™ ë¬¸ì œ ì±„ì </title>
</head>
<body>
  <h1>ğŸ“· ìˆ˜í•™ ì‹œí—˜ì§€ë¥¼ ì´¬ì˜í•˜ê±°ë‚˜ ì—…ë¡œë“œí•˜ì„¸ìš”</h1>

  <form>
    <input type="file" accept="image/*" capture="environment" required>
    <p>â€» ì‹œí—˜ì§€ê°€ ì •ë©´ì—ì„œ ì˜ ë³´ì´ë„ë¡ ì°ì–´ ì£¼ì„¸ìš”.</p>
    <button type="submit">ì±„ì í•˜ê¸°</button>
  </form>

  <p><a href="index.html">â† ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a></p>

  <script>
    document.querySelector("form").addEventListener("submit", async (e) => {
      e.preventDefault();

      const file = document.querySelector("input[type=file]").files[0];
      if (!file) return alert("íŒŒì¼ì„ ì„ íƒí•´ ì£¼ì„¸ìš”.");

      const reader = new FileReader();
      reader.onloadend = async () => {
        const base64 = reader.result.split(',')[1];

        try {
          const res = await fetch("https://68744ad1-8dba-41d6-9c56-4a5aa4062eb2-00-2w8umvmvho639.sisko.replit.dev/grade", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              image: base64,
              hint: `ë‹¤ìŒì€ 3í•™ë…„ ìˆ˜í•™ ë¬¸ì œì— ëŒ€í•œ ì •ë‹µ ëª©ë¡ì…ë‹ˆë‹¤. ì´ ì •ë‹µì„ ê¸°ì¤€ìœ¼ë¡œ í•™ìƒì˜ ë‹µì´ ë§ëŠ”ì§€ ë¹„êµí•´ ì£¼ì„¸ìš”. í‹€ë¦° ë¬¸ì œëŠ” ë²ˆí˜¸, ë¬¸ì œì‹, í•™ìƒ ë‹µ, ì •ë‹µì„ í‘œë¡œ ë³´ì—¬ ì£¼ì„¸ìš”.
1: 243 + 326 = 569
2: 428 + 351 = 779
3: 273 + 314 = 587
4: 183 + 402 = 585
5: 527 - 314 = 213
6: 627 - 212 = 415
...`
            })
          });

          const data = await res.json();
          alert("ğŸ“Š ì±„ì  ê²°ê³¼:\n\n" + data.result);
        } catch (err) {
          alert("âŒ ì˜¤ë¥˜ ë°œìƒ:\n" + err.message);
        }
      };

      reader.readAsDataURL(file);
    });
  </script>
</body>
</html>
